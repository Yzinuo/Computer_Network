# 概述
复用和解复用是TCP，UDP都有的功能。
发送端把发送到同一个目标主机IP的数据打包，一起发送，这就是复用的过程。
接收端把收到的数据包，根据数据目标端口，分配给对应的数据，这就是解复用的过程。

# TCP具体流程
**复用过程**：
- 应用层把数据部分传输给传输层的时候夹带了SOCKET。
- 传输层从多个套接字接收来自多个进程的报文，把得到的数据和socket对应的port封装，形成了TCP段 `port+数据`，并传输给网络层。
- 网络层的IP协议，又根据socket对TCP段进行封装，就形成了IP数据报 `ip + tcp段`。 完成了复用的过程。

**解复用**
- 一层一层的拆包，把得到的ip 和 port 和socket表一一对应，找到对应进程的pid。

# TCP 和 UDP 解复用和复用的区别
**本质上就是两者之间套接字的区别**
- TCP 套接字是一个四元组，解复用时需要根据socket表找到pid。因此解复用时，只要socket的四元组一个不一样，得到的**进程pid就不一样**。
- UDP 套接字是一个二元组，仅仅只包含目标ip和port。因此解复用过程中，尽管发送端的ip和port不一样，但是**会得到相同的pid**

`port和pid不一样！`
> port 是用来在网络传输中区分不同进程的。 pid 是用来在操作系统中区分不同进程的，拿到pid就可以真正的对进程进行操作。
> **存在在同一个port中，但是可能存在不同的pid。** 多个HTTP服务器可以绑定到同一个端口，但它们通常会监听不同的IP地址。